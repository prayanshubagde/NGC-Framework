# Module Specification: M4 - Foresight (Civilizational Intelligence)

**Version:** 1.0  
**Status:** DRAFT  
**Author:** Nathanael J. Bocker, inspired by Tyler Fischella  
**Date:** January 18, 2026

---

## 1. Purpose

This module serves as the primary **high-level application layer**. It consumes the stream of real-time diagnostic insights from the PSMSL engine and uses them to analyze and predict systemic trends, risks, and opportunities. Its key function is to detect phase mismatches between systems operating on different temporal scales, thereby providing a quantitative measure of the "Foresight Deficit."

## 2. Dependencies

-   **M2 (PSMSL):** This module is entirely dependent on the output stream from one or more PSMSL instances for its input data.

## 3. Core Data Structures

-   **Stream Monitors (Array of Objects):** An array of monitor objects, where each object tracks the diagnostic state of a specific PSMSL instance (e.g., one for short-term news, one for long-term climate data).
-   **Phase Mismatch Matrix (M x M):** A matrix where M is the number of monitored streams. `Matrix[i][j]` stores the calculated tensor drift (Δ_mismatch) between stream `i` and stream `j`.

## 4. API Specification

### `init_monitor(streams)`

-   **Description:** Initializes the Foresight module to monitor the outputs of one or more PSMSL instances.
-   **Inputs:**
    -   `streams` (Array of PSMSL instances): An array of handles to active PSMSL engine instances.
-   **Outputs:**
    -   `Boolean`: `true` on successful initialization.
-   **Side Effects:** Creates the M x M phase mismatch matrix and begins polling the streams for diagnostic data.
-   **Error Handling:**
    -   Throws `InvalidInputError` if `streams` is not an array of valid PSMSL instances.

### `get_foresight_deficit(stream1, stream2)`

-   **Description:** Calculates and returns the current phase mismatch (tensor drift) between two monitored streams, representing the foresight deficit.
-   **Inputs:**
    -   `stream1` (PSMSL instance): The first stream to compare.
    -   `stream2` (PSMSL instance): The second stream to compare.
-   **Outputs:**
    -   `Float`: The calculated Δ_mismatch value. A higher value indicates a greater phase mismatch and a larger foresight deficit.
-   **Error Handling:**
    -   Throws `NotFoundError` if either stream is not currently being monitored.

### `get_ni_roi(idea_vector, long_term_stream)`

-   **Description:** Calculates the "National Intelligence Return on Investment" for a proposed idea by projecting its effect on a long-term stream.
-   **Inputs:**
    -   `idea_vector` (Array): The geometric representation of the proposed idea.
    -   `long_term_stream` (PSMSL instance): The stream representing long-term civilizational values.
-   **Outputs:**
    -   `Float`: The calculated NI-ROI score. Higher scores indicate better alignment with long-term wellbeing.
-   **Error Handling:**
    -   Throws `NotFoundError` if the long-term stream is not being monitored.

## 5. Performance Benchmarks

-   `init_monitor`: **O(M²)** where M is the number of streams.
-   `get_foresight_deficit`: **O(N²)**, as it requires comparing the covariance matrices of the two streams (where N is the number of concepts).
-   `get_ni_roi`: **O(N²)**, involving a projection and recalculation of the long-term stream's state.

Performance is highly dependent on the number of concepts (N) in the underlying PSMSL instances.

---

**© Nathanael J. Bocker, 2026. All rights reserved.**
